<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Search - Tech පුවත්</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link type="image/png" sizes="120x120" rel="icon" href="https://img.icons8.com/?size=100&id=9981&format=png&color=cccccc">
  <link rel="stylesheet" href="style.css" />
</head>
  <body class="text-light">

  <!-- Navbar -->
  <nav class="navbar navbar-dark bg-chatgpt px-4">
   <a class="navbar-brand" href="index.html">
        <img
          src="https://img.icons8.com/?size=100&id=9981&format=png&color=cccccc"
          alt="Logo"
          width="30"
          height="24"
          class="d-inline-block align-text-top"
        /><b>
        Tech පුවත්</b></a
      >
  </nav>

  <main class="container my-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
  <h2 style="color: #ccc;">Search Results</h2>
  <a href="index.html" class="btn btn-outline-success" style="border-color: #ccc; color: #ccc;">← Back to Home</a>
</div>

    </div>
    

    <input
      type="text"
      id="search-query"
      class="form-control mb-4"
      placeholder="Search news..."
      autofocus
    />

    <div id="search-results"></div>
  </main>

      <footer class="bg-body-tertiary text-center">
  <!-- Grid container -->
  <div class="container p-4">
    <a href="index.html" class="me-3" style="color: #ccc">Home</a>
        <a href="about.html" class="me-3" style="color: #ccc">About</a>
        <a href="disclaimer.html" style="color: #ccc">Disclaimer</a>
      </div>
  <!-- Grid container -->

  <!-- Copyright -->
  <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.05);">
    © 2025 Copyright:
    <a class="text-body" href="#">Made by tong09</a>
  </div>
  <!-- Copyright -->
</footer>

  <script>
    const searchInput = document.getElementById('search-query');
    const resultsContainer = document.getElementById('search-results');
    let allArticles = [];

    async function loadArticles() {
      try {
        const res = await fetch('news.json');
        const data = await res.json();
        allArticles = data.articles;
        renderResults('');
      } catch (err) {
        resultsContainer.innerHTML = '<p class="text-danger text-center">Failed to load articles.</p>';
      }
    }

    function renderResults(query) {
      const filtered = allArticles.filter(article =>
        article.title.toLowerCase().includes(query) ||
        article.description.toLowerCase().includes(query)
      );

      if (filtered.length === 0) {
        resultsContainer.innerHTML = '<p class="text-center text-muted">No results found.</p>';
        return;
      }

      const row = document.createElement('div');
      row.className = 'row g-4';

      filtered.forEach(article => {
        const col = document.createElement('div');
        col.className = 'col-lg-4 col-md-6 col-sm-12';
        col.innerHTML = `
          <article class="card bg-dark text-light border-0 shadow-sm h-100">
            <img src="${article.image}" class="card-img-top" alt="News Image">
            <div class="card-body d-flex flex-column">
              <h3 class="card-title">${article.title}</h3>
              <p class="card-text flex-grow-1">${article.description}</p>
              <a href="news.html" onclick="viewNews(${allArticles.indexOf(article)})" class="btn btn-info mt-auto">Read more</a>
            </div>
          </article>
        `;
        row.appendChild(col);
      });

      resultsContainer.innerHTML = '';
      resultsContainer.appendChild(row);
    }

    function viewNews(index) {
      localStorage.setItem('selectedArticleIndex', index);
    }

    searchInput.addEventListener('input', () => {
      const query = searchInput.value.toLowerCase();
      renderResults(query);
    });

    loadArticles();
  </script>
</body>
</html>
